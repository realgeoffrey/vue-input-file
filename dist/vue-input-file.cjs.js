"use strict";var RATE=1048576,script={props:{accept:{type:String,default:""},maxSize:{type:Number,default:0},allowBlobUrl:{type:Boolean,default:!0},allowBase64:{type:Boolean,default:!0}},data:function(){return{file:"",blobUrl:"",base64:"",reader:Object.freeze({abort:function(){},removeEventListener:function(){}})}},beforeDestroy:function(){this.destroyReader()},methods:{change:function(e,t){this.destroyReader(),e&&(0===this.maxSize||e.size<=this.maxSize*RATE?this.allowBase64?(this.file=e,this.reader=new window.FileReader,this.reader.addEventListener("load",this.handleReaderLoad),this.reader.readAsDataURL(e)):this.update({file:e,blobUrl:this.allowBlobUrl?window.URL.createObjectURL(e):"",base64:""}):(t.value="",this.$emit("error",{msg:"上传文件过大（≈".concat((e.size/RATE).toFixed(1),"M），请上传").concat(this.maxSize,"M以下的图片")})))},handleReaderLoad:function(e){this.update({file:this.file,blobUrl:this.allowBlobUrl?window.URL.createObjectURL(this.file):"",base64:e.target.result}),this.destroyReader()},update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.file,i=void 0===t?"":t,n=e.blobUrl,o=void 0===n?"":n,r=e.base64,a=void 0===r?"":r;this.file=i,this.blobUrl=o,this.base64=a,this.$emit("update",{file:i,blobUrl:o,base64:a}),this.$refs.inputDom.value=""},destroyReader:function(){this.reader.abort(),this.reader.removeEventListener("load",this.handleReaderLoad)}}};function normalizeComponent(e,t,i,n,o,r,a,s,l,d){"boolean"!=typeof a&&(l=s,s=a,a=!1);var _,c="function"==typeof i?i.options:i;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,o&&(c.functional=!0)),n&&(c._scopeId=n),r?(_=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=_):t&&(_=a?function(){t.call(this,d(this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),_)if(c.functional){var u=c.render;c.render=function(e,t){return _.call(t),u(e,t)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,_):[_]}return i}var normalizeComponent_1=normalizeComponent;const __vue_script__=script;var __vue_render__=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{on:{click:function(t){return e.$refs.inputDom.click()}}},[i("input",{ref:"inputDom",staticStyle:{display:"none"},attrs:{accept:e.accept,type:"file"},on:{change:function(t){return e.change(t.target.files[0],t.target)}}}),e._v(" "),e._t("default",[e._v("\n    "+e._s(e.file?e.file.name:"未选择任何文件")+"\n  ")],{base64:e.base64,blobUrl:e.blobUrl,file:e.file})],2)},__vue_staticRenderFns__=[];__vue_render__._withStripped=!0;const __vue_inject_styles__=void 0,__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=!1;var vueInputFile=normalizeComponent_1({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},void 0,__vue_script__,void 0,!1,void 0,!1,void 0,void 0,void 0);vueInputFile.install=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component(t.component||"vue-input-file",vueInputFile)},module.exports=vueInputFile;
